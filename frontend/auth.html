<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LifeDrop | Login & Signup</title>

    <!-- Google Fonts & FontAwesome -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Leaflet CSS (no SRI) -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <link rel="stylesheet" href="CSS/auth.css" />
  </head>
  <body>
    <div class="auth-card">
      <i class="fas fa-heart auth-logo"></i>
      <h1 class="auth-title">LifeDrop</h1>
      <p class="auth-subtitle" id="subtitle">Choose your role to continue</p>

      <!-- Top Notification Bar -->
      <div id="topNotification">Notification</div>

      <!-- Role Selection -->
      <div id="roleSelect">
        <div class="role-buttons">
          <button class="btn" onclick="showForm('admin')">Admin</button>
          <button class="btn" onclick="showForm('donor')">Donor</button>
          <button class="btn" onclick="showForm('bloodbank')">
            Blood Bank
          </button>
        </div>
      </div>
      <!-- Admin Form (unchanged) -->
      <form id="adminForm" class="auth-form hidden" novalidate>
        <div class="input-group">
          <input
            type="email"
            id="adminusername"
            name="adminEmail"
            placeholder="Username"
            required
          />
        </div>
        <div class="input-group">
          <input
            type="password"
            id="adminpassword"
            name="adminPassword"
            placeholder="Password"
            required
          />
          <i class="fas fa-eye toggle-password"></i>
        </div>
        <button type="submit" class="btn">Login as Admin</button>
      </form>

      <!-- Donor Forms -->
      <div id="donorForm" class="hidden">
        <!-- Donor Login Section -->
        <div id="donorLoginSection">
          <div class="login-methods">
            <div id="donorPasswordTab" class="login-tab active">
              Login with Password
            </div>
            <div id="donorOtpTab" class="login-tab">Login with OTP</div>
          </div>

          <!-- Login With Password -->
          <form id="donorLoginPasswordForm" class="auth-form">
            <div class="input-group">
              <input
                type="email"
                id="donorEmail"
                name="email"
                placeholder="Email"
                autocomplete="off"
                required
              />
            </div>
            <div class="input-group">
              <input
                type="password"
                id="donorPassword"
                name="password"
                placeholder="Password"
                autocomplete="off"
                required
              />
              <i class="fas fa-eye toggle-password"></i>
            </div>
            <div
              style="
                text-align: right;
                margin-top: -0.5rem;
                margin-bottom: 0.5rem;
              "
            >
              <a href="#" class="toggle-link" id="donorForgotPassword"
                >Forgot Password?</a
              >
            </div>
            <button type="submit" class="btn">Login</button>
            <a class="toggle-link" id="donorToggle"
              >Don’t have an account? Sign up</a
            >
          </form>

          <!-- Login With OTP -->
          <form id="donorLoginOtpForm" class="auth-form hidden">
            <div class="input-group">
              <input
                type="text"
                id="loginOtpDetail"
                name="otpEmail"
                placeholder="Phone / Email"
                required
              />
            </div>
            <button type="button" class="btn" id="sendOtp">Send OTP</button>
            <div class="input-group otp-row">
              <input
                type="text"
                id="otpInput"
                name="otp"
                placeholder="Enter OTP"
                required
              />
              <span class="resend-otp disabled" id="resendOtp"
                >Resend OTP (30)</span
              >
            </div>
            <button type="submit" class="btn">Login</button>
          </form>
        </div>

        <!-- Donor Forgot Password Section (hidden, multi-step) -->
        <div id="donorForgotSection" class="hidden">
          <!-- Step 1: Enter Email/Phone -->
          <form id="forgotStep1" class="auth-form">
            <div class="input-group">
              <input
                type="text"
                id="fpContact"
                placeholder="Email or Phone"
                required
              />
            </div>
            <button type="button" id="fpSendOtpBtn" class="btn">
              Send OTP
            </button>
            <a class="toggle-link" id="fpBack1">Back to Login</a>
          </form>

          <!-- Step 2: Verify OTP -->
          <form id="forgotStep2" class="auth-form hidden">
            <div class="input-group">
              <input type="text" id="fpVerifyContact" readonly />
            </div>
            <div class="input-group otp-row">
              <input
                type="text"
                id="fpOtpInput"
                placeholder="Enter OTP"
                required
              />
              <span class="resend-otp disabled" id="fpResendOtp"
                >Resend OTP (30)</span
              >
            </div>
            <button type="button" id="fpVerifyBtn" class="btn">
              Verify OTP
            </button>
            <a class="toggle-link" id="fpBack2">Back to Login</a>
          </form>

          <!-- Step 3: Reset Password -->
          <form id="forgotStep3" class="auth-form hidden">
            <div class="input-group">
              <input type="text" id="fpResetContact" readonly />
            </div>
            <div class="input-group">
              <input
                type="password"
                id="fpNewPassword"
                name="newpassword"
                placeholder="New Password"
                required
              />
              <i class="fas fa-eye toggle-password"></i>
            </div>
            <div class="input-group">
              <input
                type="password"
                id="fpConfirmNewPassword"
                name="confirmnewpassword"
                placeholder="Confirm New Password"
                required
              />
              <i class="fas fa-eye toggle-password"></i>
            </div>
            <button type="button" id="fpResetBtn" class="btn">
              Reset Password
            </button>
            <a class="toggle-link" id="fpBack3">Back to Login</a>
          </form>
        </div>

        <!-- Map Modal for Address Selection -->
        <div id="mapModal">
          <div id="mapContainer">
            <div id="map"></div>
            <button id="confirmAddressBtn">Confirm Address</button>
          </div>
        </div>

        <!-- Donor Signup Form (Address input triggers map) -->
        <form id="donorSignupForm" class="auth-form hidden" novalidate>
          <div class="input-group">
            <input type="text" id="name" placeholder="Full Name" required />
          </div>
          <div class="input-group">
            <input type="number" id="age" placeholder="Age" required />
          </div>
          <div class="gender-group">
            <input type="radio" id="male" value="Male" name="gender" checked />
            <label for="male">Male</label>
            <input type="radio" id="female" value="Female" name="gender" />
            <label for="female">Female</label>
          </div>
          <div class="input-group">
            <input type="email" id="email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="phonenumber"
              placeholder="Phone With Country Code"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="password"
              placeholder="Password"
              required
            />
            <i class="fas fa-eye toggle-password"></i>
          </div>
          <div class="input-group">
            <input
              type="password"
              id="confirmPassword"
              placeholder="Confirm Password"
              required
            />
            <i class="fas fa-eye toggle-password"></i>
          </div>
          <div class="input-group">
            <select id="bloodgroup" required>
              <option value="">Select Blood Group</option>
              <option value="A+">A+</option>
              <option value="A-">A−</option>
              <option value="B+">B+</option>
              <option value="B-">B−</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB−</option>
              <option value="O+">O+</option>
              <option value="O-">O−</option>
            </select>
          </div>
          <div class="input-group">
            <input
              type="text"
              name="address"
              id="donorAddress"
              placeholder="Address"
              readonly
              required
            />
          </div>
          <button type="submit" class="btn">Sign Up</button>
          <a class="toggle-link" id="donorToggleBack"
            >Already have an account? Login</a
          >
        </form>
      </div>

      <!-- Donor Signup OTP Modal -->
      <div id="donorSignupOtpModal" class="otp-modal hidden">
        <div class="otp-content">
          <i class="fas fa-heart auth-logo"></i>
          <h2 class="auth-title">Verify Your Account</h2>
          <p class="auth-subtitle">
            Enter the OTP sent to your <strong>Email</strong> and
            <strong>Phone</strong>
          </p>

          <div class="otp-inputs">
            <input
              type="text"
              id="signupEmailOtp"
              placeholder="Email OTP"
              maxlength="6"
            />
            <input
              type="text"
              id="signupPhoneOtp"
              placeholder="Phone OTP"
              maxlength="6"
            />
          </div>

          <div class="otp-actions">
            <button id="signupVerifyBtn" class="verify-btn">Verify</button>
            <button id="signupResendBtn" class="resend-btn" disabled>
              Resend OTP <span id="signupResendTimer">(30)</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Blood Bank Forms (unchanged) -->
      <div id="bloodbankForms" class="hidden">
        <form id="bbLoginForm" class="auth-form">
          <div class="input-group">
            <input
              type="email"
              name="bbEmail"
              placeholder="Email"
              id="bloodbankEmail"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              name="bbPassword"
              placeholder="Password"
              id="bloodbankPassword"
              required
            /><i class="fas fa-eye toggle-password"></i>
          </div>
          <div
            style="
              text-align: right;
              margin-top: -0.5rem;
              margin-bottom: 0.5rem;
            "
          >
            <a href="#" class="toggle-link" style="font-size: 0.85rem"
              >Forgot Password?</a
            >
          </div>
          <button type="submit" class="btn">Login</button>
          <a class="toggle-link" id="bbToggle"
            >Don't have an account? Sign up</a
          >
        </form>

        <form id="bbSignupForm" class="auth-form hidden" novalidate>
          <div class="input-group">
            <input
              type="text"
              id="bloodbankname"
              name="bbName"
              placeholder="Blood Bank Name"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="registrationid"
              name="bbRegId"
              placeholder="Registration ID"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="email"
              id="bloodbankemail"
              name="bbEmail"
              placeholder="Email"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="bloodbankphone"
              name="bbPhone"
              placeholder="Phone Number"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="bloodbankaddress"
              name="address"
              placeholder="Blood Bank Address"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="bloodbankmapaddress"
              name="mapAddress"
              placeholder="Map Location"
              readonly
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="bloodbankpassword"
              name="bbPassword"
              placeholder="Password"
              required
            />
            <i class="fas fa-eye toggle-password"></i>
          </div>
          <div class="input-group">
            <input
              type="password"
              id="bloodbankconfirmpassword"
              name="bbConfirmPassword"
              placeholder="Confirm Password"
              required
            />
            <i class="fas fa-eye toggle-password"></i>
          </div>
          <button type="submit" class="btn">Sign Up</button>
          <a class="toggle-link" id="bbToggleBack"
            >Already have an account? Login</a
          >
        </form>
        <!-- Blood Bank Forgot Password -->
        <form id="bbForgotPasswordForm" class="auth-form hidden" novalidate>
          <h2 class="form-title">Forgot Password</h2>
          <div class="input-group">
            <input
              type="email"
              id="bbForgotEmail"
              placeholder="Enter your registered email"
              required
            />
          </div>
          <button type="submit" class="btn">Send OTP</button>
          <a href="#" id="bbForgotBack" class="toggle-link">Back to Login</a>
        </form>

        <!-- Blood Bank Verify OTP Form -->
        <form id="bbVerifyOtpForm" class="auth-form hidden" novalidate>
          <h2 class="form-title">Verify OTP</h2>

          <div class="input-group">
            <input
              type="text"
              id="bbVerifyEmail"
              placeholder="Email"
              readonly
            />
          </div>

          <div class="input-group">
            <input type="text" id="bbOtp" placeholder="Enter OTP" required />
          </div>

          <div
            class="otp-actions"
            style="display: flex; flex-direction: column; gap: 0.75rem"
          >
            <button type="submit" class="btn" id="bbVerifyBtn">Verify</button>
            <button type="button" class="btn" id="bbResendOtp">
              Resend OTP
            </button>
          </div>
        </form>

        <!-- Blood Bank Reset Password Form -->
        <form id="bbResetPasswordForm" class="auth-form hidden" novalidate>
          <h2 class="form-title">Reset Password</h2>
          <div class="input-group">
            <input
              type="password"
              id="bbNewPassword"
              placeholder="New Password"
              required
            />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="bbConfirmPassword"
              placeholder="Confirm Password"
              required
            />
          </div>
          <button type="submit" class="btn">Reset Password</button>
        </form>
      </div>
      <a href="index.html" class="back-home"
        ><i class="fas fa-arrow-left"></i> Back to Home</a
      >
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="Script/auth.js"></script>
  </body>
</html>
